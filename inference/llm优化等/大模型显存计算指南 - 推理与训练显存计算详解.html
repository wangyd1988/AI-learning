<!DOCTYPE html>
<html lang="zh-CN">
 <head>
  <meta charset="utf-8"/>
  <link href="https://blog.csdn.net/qq_41797451/article/details/144516971" rel="canonical"/>
  <meta content="text/html; charset=utf-8" http-equiv="content-type"/>
  <meta content="webkit" name="renderer">
   <meta content="webkit" name="force-rendering">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
    <meta content="always" name="referrer"/>
    <meta content="no-siteapp" http-equiv="Cache-Control">
     <link href="#" media="handheld" rel="alternate"/>
     <meta content="pc" name="applicable-device"/>
     <link href="https://g.csdnimg.cn/static/logo/favicon32.ico" rel="shortcut icon" type="image/x-icon"/>
     <title>
      хдзцибхЮЛцШ╛хнШшобчоЧцМЗхНЧ - цОичРЖф╕Ошонч╗ГцШ╛хнШшобчоЧшпжшзг_хдзцибхЮЛшонч╗ГцШ╛хнШшобчоЧ-CSDNхНЪхов
     </title>
     <meta content="хдзцибхЮЛшонч╗ГцШ╛хнШшобчоЧ" name="keywords"/>
     <meta content='{"autorun":true,"install":true,"keyword":"хдзцибхЮЛцОичРЖ"}' name="csdn-baidu-search"/>
     <meta content="цЦЗчлац╡ПшзИщШЕшп╗2.5kцмбя╝МчВ╣ш╡Ю11цмбя╝МцФ╢шЧП15цмбуАВцОичРЖщШ╢цо╡ф╕╗шжБшАГшЩСхПВцХ░щЗПуАБц│ицДПхКЫч╝УхнШхТМц┐Ац┤╗хА╝шонч╗ГщШ╢цо╡щЬАщвЭхдЦшАГшЩСцвпх║жуАБф╝ШхМЦхЩичК╢цАБхТМхЙНхРСшобчоЧч╝УхнШхРИчРЖф╜┐чФицШ╛хнШф╝ШхМЦцКАцЬпхПпф╗ечкБча┤чбмф╗╢щЩРхИ╢х╕МцЬЫш┐ЩчпЗцЦЗчлашГ╜х╕охКйф╜ацЫ┤хе╜хЬ░чРЖшзгхТМшзДхИТхдзцибхЮЛчЪДцШ╛хнШф╜┐чФия╝Б_хдзцибхЮЛшонч╗ГцШ╛хнШшобчоЧ" name="description"/>
     <link href="https://csdnimg.cn/release/blogv2/dist/pc/css/detail_enter-af0ead44cd.min.css" rel="stylesheet" type="text/css"/>
     <link href="https://csdnimg.cn/release/blogv2/dist/pc/themesSkin/skin-ink/skin-ink-a11cfdaac3.min.css" rel="stylesheet" type="text/css"/>
     <meta content='{"type":"0","fixModel":"1"}' name="toolbar"/>
     <link href="https://csdnimg.cn/public/sandalstrap/1.4/css/sandalstrap.min.css" rel="stylesheet" type="text/css"/>
     <style>
      .MathJax, .MathJax_Message, .MathJax_Preview{
            display: none
        }
     </style>
    </meta>
   </meta>
  </meta>
  <style type="text/css">
   * { user-select: text; } pre{max-height: none!important; overflow-y: hidden;}
  </style>
 </head>
 <body class="nodata" style="">
  <link href="https://csdnimg.cn/release/blogv2/dist/pc/css/blog_code-01256533b5.min.css" rel="stylesheet"/>
  <link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/chart-3456820cac.css" rel="stylesheet">
   <link href="https://g.csdnimg.cn/lib/swiper/6.0.4/css/swiper.css" rel="stylesheet">
    <div class="main_father clearfix d-flex justify-content-center mainfather-concision" style="height:100%;">
     <div class="container clearfix container-concision" id="mainBox">
      <main>
       <div class="blog-content-box">
        <div class="article-header-box">
         <div class="article-header">
          <div class="article-title-box">
           <h1 class="title-article" id="articleContentId">
            хдзцибхЮЛцШ╛хнШшобчоЧцМЗхНЧ - цОичРЖф╕Ошонч╗ГцШ╛хнШшобчоЧшпжшзг
           </h1>
          </div>
          <div class="article-info-box">
           <div class="article-bar-top">
            <img alt="" class="article-type-img" src="https://csdnimg.cn/release/blogv2/dist/pc/img/original.png"/>
            <div class="bar-content">
             <a class="article-vip-box" data-report-click='{"spm":"3001.10404"}' data-report-query="spm=3001.10404" data-report-view='{"spm":"3001.10404"}' href="https://mall.csdn.net/vip" target="_blank">
              <img alt="" class="article-vip-img-new" src="https://csdnimg.cn/release/blogv2/dist/pc/img/identityVipNew.png"/>
             </a>
             <a class="follow-nickName" href="https://blog.csdn.net/qq_41797451" rel="noopener" target="_blank" title="цЫжч┤лц▓Р">
              цЫжч┤лц▓Р
             </a>
             <img alt="" class="article-time-img article-heard-img" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newUpTime2.png"/>
             <span class="time">
              х╖▓ф║О┬а2024-12-16 20:54:39┬аф┐оцФ╣
             </span>
             <div class="read-count-box">
              <img alt="" class="article-read-img article-heard-img" src="https://csdnimg.cn/release/blogv2/dist/pc/img/articleReadEyes2.png"/>
              <span class="read-count">
               щШЕшп╗щЗП2.5k
              </span>
              <a class="un-collection" data-report-click='{"mod":"popu_823","spm":"1001.2101.3001.4232","ab":"new"}' id="blog_detail_zk_collection">
               <img alt="" class="article-collect-img article-heard-img un-collect-status isdefault" src="https://csdnimg.cn/release/blogv2/dist/pc/img/tobarCollect2.png" style="display:inline-block"/>
               <img alt="" class="article-collect-img article-heard-img collect-status isactive" src="https://csdnimg.cn/release/blogv2/dist/pc/img/tobarCollectionActive2.png" style="display:none"/>
               <span class="name">
                цФ╢шЧП
               </span>
               <span class="get-collection">
                15
               </span>
              </a>
              <div class="read-count-box is-like">
               <img alt="" class="article-read-img article-heard-img" id="is-like-imgactive-new" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newHeart2023Active.png" style="display:none"/>
               <img alt="" class="article-read-img article-heard-img" id="is-like-img-new" src="https://csdnimg.cn/release/blogv2/dist/pc/img/newHeart2023Black.png" style="display:block"/>
               <span class="read-count" id="blog-digg-num">
                чВ╣ш╡ЮцХ░
                            11
               </span>
              </div>
             </div>
            </div>
           </div>
           <div class="blog-tags-box">
            <div class="tags-box artic-tag-box">
             <span class="label">
              хИЖч▒╗ф╕УцаПя╝Ъ
             </span>
             <a class="tag-link" href="https://blog.csdn.net/qq_41797451/category_12759586.html" rel="noopener" target="_blank">
              хдзцибхЮЛ
             </a>
             <span class="label">
              цЦЗчлацаЗчн╛я╝Ъ
             </span>
             <a class="tag-link" data-report-click='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"хдзцибхЮЛцШ╛хнШ","ab":"new","extra":"{\"searchword\":\"хдзцибхЮЛцШ╛хнШ\"}"}' data-report-query="spm=1001.2101.3001.4223" data-report-view='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"хдзцибхЮЛцШ╛хнШ","ab":"new","extra":"{\"searchword\":\"хдзцибхЮЛцШ╛хнШ\"}"}' href="https://so.csdn.net/so/search/s.do?q=%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%98%BE%E5%AD%98&amp;t=all&amp;o=vip&amp;s=&amp;l=&amp;f=&amp;viparticle=&amp;from_tracking_code=tag_word&amp;from_code=app_blog_art" rel="noopener" target="_blank">
              хдзцибхЮЛцШ╛хнШ
             </a>
             <a class="tag-link" data-report-click='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"цОичРЖцШ╛хнШ","ab":"new","extra":"{\"searchword\":\"цОичРЖцШ╛хнШ\"}"}' data-report-query="spm=1001.2101.3001.4223" data-report-view='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"цОичРЖцШ╛хнШ","ab":"new","extra":"{\"searchword\":\"цОичРЖцШ╛хнШ\"}"}' href="https://so.csdn.net/so/search/s.do?q=%E6%8E%A8%E7%90%86%E6%98%BE%E5%AD%98&amp;t=all&amp;o=vip&amp;s=&amp;l=&amp;f=&amp;viparticle=&amp;from_tracking_code=tag_word&amp;from_code=app_blog_art" rel="noopener" target="_blank">
              цОичРЖцШ╛хнШ
             </a>
             <a class="tag-link" data-report-click='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"шонч╗ГцШ╛хнШ","ab":"new","extra":"{\"searchword\":\"шонч╗ГцШ╛хнШ\"}"}' data-report-query="spm=1001.2101.3001.4223" data-report-view='{"mod":"popu_626","spm":"1001.2101.3001.4223","strategy":"шонч╗ГцШ╛хнШ","ab":"new","extra":"{\"searchword\":\"шонч╗ГцШ╛хнШ\"}"}' href="https://so.csdn.net/so/search/s.do?q=%E8%AE%AD%E7%BB%83%E6%98%BE%E5%AD%98&amp;t=all&amp;o=vip&amp;s=&amp;l=&amp;f=&amp;viparticle=&amp;from_tracking_code=tag_word&amp;from_code=app_blog_art" rel="noopener" target="_blank">
              шонч╗ГцШ╛хнШ
             </a>
            </div>
           </div>
           <div class="up-time">
            <span>
             ф║О┬а2024-12-16 20:07:15┬ащжЦцмбхПСх╕Г
            </span>
           </div>
           <div class="slide-content-box">
            <div class="article-copyright">
             <div class="creativecommons">
              чЙИцЭГхг░цШОя╝ЪцЬмцЦЗф╕║хНЪф╕╗хОЯхИЫцЦЗчлая╝МщБ╡х╛к
              <a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="noopener" target="_blank">
               CC 4.0 BY-SA
              </a>
              чЙИцЭГхНПшооя╝Мш╜мш╜╜шп╖щЩДф╕КхОЯцЦЗхЗ║хдДщУ╛цОехТМцЬмхг░цШОуАВ
             </div>
             <div class="article-source-link">
              цЬмцЦЗщУ╛цОея╝Ъ
              <a href="https://blog.csdn.net/qq_41797451/article/details/144516971" target="_blank">
               https://blog.csdn.net/qq_41797451/article/details/144516971
              </a>
             </div>
            </div>
           </div>
           <div class="operating">
            <a class="href-article-edit slide-toggle">
             чЙИцЭГ
            </a>
           </div>
          </div>
         </div>
        </div>
        <div id="blogHuaweiyunAdvert">
        </div>
        <article class="baidu_pl">
         <div class="article_content clearfix" id="article_content">
          <link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/kdoc_html_views-1a98987dfd.css" rel="stylesheet"/>
          <link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/ck_htmledit_views-704d5b9767.css" rel="stylesheet"/>
          <div class="markdown_views prism-atom-one-dark" id="content_views">
           <svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
           </svg>
           <blockquote>
            <p>
             ЁЯУЪ хЬищГич╜▓хТМшонч╗ГхдзцибхЮЛцЧ╢,цШ╛хнШх╛Ах╛АцШпцЬАхдзчЪДчУ╢щвИуАВцЬмцЦЗх░Жх╕охКйф╜ачРЖшзгцШ╛хнШшобчоЧчЪДхЕ│щФошжБч┤а,шойф╜ашГ╜хдЯцЫ┤хе╜хЬ░шзДхИТчбмф╗╢ш╡Дц║РуАВ
            </p>
           </blockquote>
           <h3>
            <a id="___2">
            </a>
            ф╕АуАБцОичРЖцШ╛хнШшобчоЧ - хжВф╜ХшпДф╝░цибхЮЛщГич╜▓цЙАщЬАцШ╛хнШ?
           </h3>
           <h4>
            <a id="1__4">
            </a>
            1. х╜▒хУНцОичРЖцШ╛хнШчЪДхЕ│щФохЫач┤а
           </h4>
           <h5>
            <a id="1__6">
            </a>
            (1) цибхЮЛхПВцХ░
           </h5>
           <ul>
            <li>
             хЯ║чбАцШ╛хнШхНачФи = хПВцХ░щЗП * ч▓╛х║жхнЧшКВцХ░
            </li>
            <li>
             ф╛ЛхжВ:7BцибхЮЛхЬиф╕НхРМч▓╛х║жф╕ЛчЪДхПВцХ░хНачФи
             <ul>
              <li>
               FP32(4хнЧшКВ): 7B * 4 = 28GB
              </li>
              <li>
               FP16(2хнЧшКВ): 7B * 2 = 14GB
              </li>
              <li>
               INT8(1хнЧшКВ): 7B * 1 = 7GB
              </li>
              <li>
               INT4(0.5хнЧшКВ): 7B * 0.5 = 3.5GB
              </li>
             </ul>
            </li>
           </ul>
           <h5>
            <a id="2_Attention_Cache_14">
            </a>
            (2) ц│ицДПхКЫч╝УхнШ(Attention Cache)
           </h5>
           <ul>
            <li>
             KV Cacheхдзх░П = batch_size * num_layers * 2 * seq_length * hidden_size * precision
            </li>
            <li>
             хп╣ф║ОщХ┐цЦЗцЬмчФЯцИР,ц│ицДПхКЫч╝УхнШхПпшГ╜хНачФихдзщЗПцШ╛хнШ
            </li>
           </ul>
           <h5>
            <a id="3_Activations_18">
            </a>
            (3) ц┐Ац┤╗хА╝(Activations)
           </h5>
           <ul>
            <li>
             цибхЮЛцОичРЖш┐ЗчиЛф╕нчЪДф╕нщЧ┤шобчоЧч╗УцЮЬ
            </li>
            <li>
             щАЪх╕╕хНачФихЯ║чбАхПВцХ░щЗПчЪД10%-20%цШ╛хнШ
            </li>
           </ul>
           <h4>
            <a id="2__22">
            </a>
            2. хоЮщЩЕцШ╛хнШф╝░чоЧчд║ф╛Л
           </h4>
           <p>
            ф╗еQwen-7Bф╕║ф╛Л(hidden_size=4096):
           </p>
           <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">calculate_inference_memory</span><span class="token punctuation">(</span>
    batch_size<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>
    seq_length<span class="token operator">=</span><span class="token number">2048</span><span class="token punctuation">,</span>
    model_size_b<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">,</span>
    precision<span class="token operator">=</span><span class="token string">"fp16"</span>
<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># ч▓╛х║жцШах░Д</span>
    precision_map <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"fp32"</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
        <span class="token string">"fp16"</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">"int8"</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token string">"int4"</span><span class="token punctuation">:</span> <span class="token number">0.5</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment"># хЯ║чбАхПВцХ░цШ╛хнШ</span>
    param_memory <span class="token operator">=</span> model_size_b <span class="token operator">*</span> precision_map<span class="token punctuation">[</span>precision<span class="token punctuation">]</span>
    
    <span class="token comment"># KVч╝УхнШцШ╛хнШ(хБЗшо╛32х▒В)</span>
    kv_cache <span class="token operator">=</span> <span class="token punctuation">(</span>batch_size <span class="token operator">*</span> <span class="token number">32</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">*</span> seq_length <span class="token operator">*</span> <span class="token number">4096</span> <span class="token operator">*</span> 
                precision_map<span class="token punctuation">[</span>precision<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">1024</span> <span class="token operator">**</span> <span class="token number">3</span><span class="token punctuation">)</span>
    
    <span class="token comment"># ц┐Ац┤╗хА╝цШ╛хнШ(хБЗшо╛15%)</span>
    activation_memory <span class="token operator">=</span> param_memory <span class="token operator">*</span> <span class="token number">0.15</span>
    
    total_memory <span class="token operator">=</span> param_memory <span class="token operator">+</span> kv_cache <span class="token operator">+</span> activation_memory
    <span class="token keyword">return</span> total_memory
</code></pre>
           <blockquote>
            <p>
             ЁЯТб х░Пш┤┤хгл: хоЮщЩЕш┐РшбМцЧ╢чЪДцШ╛хнШхНачФихПпшГ╜ф╝ЪцпФчРЖшо║шобчоЧчХещлШ,х╗║шоощвДчХЩ20%х╖жхП│чЪДцШ╛хнШф╜ЩщЗПуАВ
            </p>
           </blockquote>
           <h3>
            <a id="___57">
            </a>
            ф║МуАБшонч╗Гя╝Их╛ош░Гя╝ЙцШ╛хнШшобчоЧ - ф╕║ф╗Аф╣Ишонч╗ГщЬАшжБцЫ┤хдЪцШ╛хнШ?
           </h3>
           <h4>
            <a id="1__59">
            </a>
            1. шонч╗ГщШ╢цо╡чЪДщвЭхдЦцШ╛хнШх╝АщФА
           </h4>
           <h5>
            <a id="1_Gradients_61">
            </a>
            (1) цвпх║ж(Gradients)
           </h5>
           <ul>
            <li>
             цпПф╕кхПВцХ░щГ╜щЬАшжБхнШхВихп╣х║ФчЪДцвпх║ж
            </li>
            <li>
             цвпх║жцШ╛хнШ тЙИ цибхЮЛхПВцХ░цШ╛хнШ
            </li>
           </ul>
           <h5>
            <a id="2_Optimizer_States_65">
            </a>
            (2) ф╝ШхМЦхЩичК╢цАБ(Optimizer States)
           </h5>
           <p>
            ф╕НхРМф╝ШхМЦхЩичЪДцШ╛хнШхНачФи:
           </p>
           <ul>
            <li>
             SGD: хЯ║чбАхПВцХ░щЗП * 1
            </li>
            <li>
             Adam: хЯ║чбАхПВцХ░щЗП * 2 (щЬАхнШхВиф╕АщШ╢чЯйхТМф║МщШ╢чЯй)
            </li>
            <li>
             AdamW: хЯ║чбАхПВцХ░щЗП * 2
            </li>
            <li>
             Lion: хЯ║чбАхПВцХ░щЗП * 1
            </li>
            <li>
             Adafactor: хЯ║чбАхПВцХ░щЗП * 1.5
            </li>
           </ul>
           <h5>
            <a id="3__73">
            </a>
            (3) хЙНхРСшобчоЧч╝УхнШ
           </h5>
           <ul>
            <li>
             чФиф║ОхПНхРСф╝ацТншобчоЧцвпх║ж
            </li>
            <li>
             щАЪх╕╕ф╕Ох║ПхИЧщХ┐х║жцИРцнгцпФ
            </li>
           </ul>
           <h4>
            <a id="2__77">
            </a>
            2. шонч╗ГцШ╛хнШф╝░чоЧчд║ф╛Л
           </h4>
           <p>
            ф╗е7BцибхЮЛф╕║ф╛Л,ф╜┐чФиAdamWф╝ШхМЦхЩи:
           </p>
           <pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">calculate_training_memory</span><span class="token punctuation">(</span>
    batch_size<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>
    seq_length<span class="token operator">=</span><span class="token number">2048</span><span class="token punctuation">,</span>
    model_size_b<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">,</span>
    precision<span class="token operator">=</span><span class="token string">"fp16"</span><span class="token punctuation">,</span>
    optimizer<span class="token operator">=</span><span class="token string">"adamw"</span>
<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># хЯ║чбАцОичРЖцШ╛хнШ</span>
    inference_memory <span class="token operator">=</span> calculate_inference_memory<span class="token punctuation">(</span>
        batch_size<span class="token punctuation">,</span> seq_length<span class="token punctuation">,</span> model_size_b<span class="token punctuation">,</span> precision
    <span class="token punctuation">)</span>
    
    <span class="token comment"># ф╝ШхМЦхЩичК╢цАБцШах░Д</span>
    optimizer_multiplier <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"sgd"</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token string">"adam"</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">"adamw"</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">"lion"</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token string">"adafactor"</span><span class="token punctuation">:</span> <span class="token number">1.5</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment"># цвпх║жцШ╛хнШ</span>
    gradient_memory <span class="token operator">=</span> model_size_b <span class="token operator">*</span> <span class="token number">2</span>  <span class="token comment"># fp16/bf16</span>
    
    <span class="token comment"># ф╝ШхМЦхЩичК╢цАБцШ╛хнШ</span>
    optimizer_memory <span class="token operator">=</span> <span class="token punctuation">(</span>model_size_b <span class="token operator">*</span> 
                       optimizer_multiplier<span class="token punctuation">[</span>optimizer<span class="token punctuation">]</span> <span class="token operator">*</span> 
                       <span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment"># fp16/bf16</span>
    
    total_memory <span class="token operator">=</span> <span class="token punctuation">(</span>inference_memory <span class="token operator">+</span> 
                   gradient_memory <span class="token operator">+</span> 
                   optimizer_memory<span class="token punctuation">)</span>
    <span class="token keyword">return</span> total_memory
</code></pre>
           <h4>
            <a id="3__117">
            </a>
            3. цШ╛хнШф╝ШхМЦцКАцЬп
           </h4>
           <h5>
            <a id="1_Gradient_Checkpointing_119">
            </a>
            (1) цвпх║жцгАцЯечВ╣(Gradient Checkpointing)
           </h5>
           <ul>
            <li>
             ф╗ешобчоЧцЧ╢щЧ┤цНвцШ╛хнШчй║щЧ┤
            </li>
            <li>
             хПпшКВчЬБ30%-50%цШ╛хнШ
            </li>
            <li>
             шонч╗ГщАЯх║жщЩНф╜О20%-30%
            </li>
           </ul>
           <h5>
            <a id="2__124">
            </a>
            (2) ц╖╖хРИч▓╛х║жшонч╗Г
           </h5>
           <ul>
            <li>
             ф╜┐чФиFP16/BF16ш┐ЫшбМшобчоЧ
            </li>
            <li>
             ф╜┐чФиFP32хнШхВиф╕╗шжБцЭГщЗН
            </li>
            <li>
             хПпшКВчЬБ40%-50%цШ╛хнШ
            </li>
           </ul>
           <h5>
            <a id="3_ZeRO_129">
            </a>
            (3) щЫ╢хЖЧф╜Щф╝ШхМЦхЩи(ZeRO)
           </h5>
           <ul>
            <li>
             хИЖх╕Гх╝Пшонч╗Гф╕нчЪДцШ╛хнШф╝ШхМЦ
            </li>
            <li>
             хПпхоЮчО░цОеш┐Сч║┐цАзчЪДцШ╛хнШч╝йцФ╛
            </li>
            <li>
             х╕╕чФихоЮчО░:DeepSpeedуАБMegatron-LM
            </li>
           </ul>
           <blockquote>
            <p>
             ЁЯФН хоЮш╖╡х╗║шоо:
            </p>
            <ol>
             <li>
              ф╝ШхЕИшАГшЩСф╜┐чФиц╖╖хРИч▓╛х║жшонч╗Г
             </li>
             <li>
              хжВцШ╛хнШф╗НчД╢ф╕Нш╢│,х╝АхРпцвпх║жцгАцЯечВ╣
             </li>
             <li>
              хдЪхНбшонч╗ГцЧ╢,ф╜┐чФиZeROчнЙхИЖх╕Гх╝Пф╝ШхМЦцКАцЬп
             </li>
            </ol>
           </blockquote>
           <h4>
            <a id="_140">
            </a>
            хПВшАГ
           </h4>
           <pre><code class="prism language-bash"><span class="token comment">#чЫСхРмцШ╛хНбя╝МцпП 1 чзТхИ╖цЦ░ф╕Ацмбя╝Ъ</span>
<span class="token function">watch</span> <span class="token parameter variable">-n</span> <span class="token parameter variable">-1</span> <span class="token parameter variable">-d</span> nvidia-smi
</code></pre>
           <p>
            ф╕ЛщЭвч╗Щхдзхо╢ч▓ЧчХеф╝░шобцОичРЖхТМшонч╗ГчЪДцШ╛хнШщЬАц▒ВцГЕхЖ╡я╝МчЫ╕ф┐бхдзхо╢щАЪш┐Зф╕КщЭвчЪДхнжф╣ая╝Мх╖▓ч╗ПхИЭцнецОМцПбф║ЖхЕ╖ф╜УчЪДшобчоЧцЦ╣х╝Пя╝Мф╣ЯхПпф╗ецМЙчЕзф╕ЛщЭвчЪДшбица╝ш┐ЫшбМхп╣чЕзцОичРЖуАВ
           </p>
           <table>
            <thead>
             <tr>
              <th>
               цибхЮЛч▓╛х║ж
              </th>
              <th>
               7B
              </th>
              <th>
               13B
              </th>
              <th>
               70B
              </th>
             </tr>
            </thead>
            <tbody>
             <tr>
              <td>
               FP32хЕич▓╛х║ж
              </td>
              <td>
               28GB
              </td>
              <td>
               52GB
              </td>
              <td>
               280GB
              </td>
             </tr>
             <tr>
              <td>
               FP16хНКч▓╛х║ж
              </td>
              <td>
               14GB
              </td>
              <td>
               26GB
              </td>
              <td>
               140GB
              </td>
             </tr>
             <tr>
              <td>
               Int8 ч▓╛х║ж
              </td>
              <td>
               7GB
              </td>
              <td>
               13GB
              </td>
              <td>
               70GB
              </td>
             </tr>
             <tr>
              <td>
               Int4 ч▓╛х║ж
              </td>
              <td>
               3.5GB
              </td>
              <td>
               6.5GB
              </td>
              <td>
               35GB
              </td>
             </tr>
            </tbody>
           </table>
           <table>
            <thead>
             <tr>
              <th>
               шонч╗ГцЦ╣ц│Х
              </th>
              <th>
               цибхЮЛч▓╛х║ж
              </th>
              <th>
               7B
              </th>
              <th>
               13B
              </th>
              <th>
               70B
              </th>
             </tr>
            </thead>
            <tbody>
             <tr>
              <td>
               хЕихПВцХ░
              </td>
              <td>
               FP32хЕич▓╛х║ж
              </td>
              <td>
               120GB
              </td>
              <td>
               240GB
              </td>
              <td>
               1200GB
              </td>
             </tr>
             <tr>
              <td>
               хЕихПВцХ░
              </td>
              <td>
               FP16хНКч▓╛х║ж
              </td>
              <td>
               60GB
              </td>
              <td>
               120GB
              </td>
              <td>
               600GB
              </td>
             </tr>
             <tr>
              <td>
               щГихИЖхПВцХ░
              </td>
              <td>
               FP16хНКч▓╛х║ж
              </td>
              <td>
               20GB
              </td>
              <td>
               40GB
              </td>
              <td>
               200GB
              </td>
             </tr>
             <tr>
              <td>
               LoRA
              </td>
              <td>
               FP16хНКч▓╛х║ж
              </td>
              <td>
               16GB
              </td>
              <td>
               32GB
              </td>
              <td>
               160GB
              </td>
             </tr>
             <tr>
              <td>
               QLoRA
              </td>
              <td>
               Int8 ч▓╛х║ж
              </td>
              <td>
               10GB
              </td>
              <td>
               20GB
              </td>
              <td>
               80GB
              </td>
             </tr>
             <tr>
              <td>
               QLoRA
              </td>
              <td>
               Int4 ч▓╛х║ж
              </td>
              <td>
               6GB
              </td>
              <td>
               12GB
              </td>
              <td>
               48GB
              </td>
             </tr>
            </tbody>
           </table>
           <h3>
            <a id="_165">
            </a>
            цА╗ч╗У
           </h3>
           <p>
            хРИчРЖф╝░чоЧхТМф╝ШхМЦцШ╛хнШф╜┐чФицШпцИРхКЯщГич╜▓хТМшонч╗ГхдзцибхЮЛчЪДхЕ│щФо:
           </p>
           <ol>
            <li>
             цОичРЖщШ╢цо╡ф╕╗шжБшАГшЩСхПВцХ░щЗПуАБц│ицДПхКЫч╝УхнШхТМц┐Ац┤╗хА╝
            </li>
            <li>
             шонч╗ГщШ╢цо╡щЬАщвЭхдЦшАГшЩСцвпх║жуАБф╝ШхМЦхЩичК╢цАБхТМхЙНхРСшобчоЧч╝УхнШ
            </li>
            <li>
             хРИчРЖф╜┐чФицШ╛хнШф╝ШхМЦцКАцЬпхПпф╗ечкБча┤чбмф╗╢щЩРхИ╢
            </li>
           </ol>
           <p>
            х╕МцЬЫш┐ЩчпЗцЦЗчлашГ╜х╕охКйф╜ацЫ┤хе╜хЬ░чРЖшзгхТМшзДхИТхдзцибхЮЛчЪДцШ╛хнШф╜┐чФия╝БхжВцЮЬшзЙх╛ЧцЬЙх╕охКй,шп╖чВ╣ш╡ЮцФпцМБ~ ЁЯШК
           </p>
          </div>
          <link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-a5d25dd831.css" rel="stylesheet"/>
          <link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-e504d6a974.css" rel="stylesheet"/>
         </div>
        </article>
       </div>
       <div class="directory-boxshadow-dialog" style="display:none;">
        <div class="directory-boxshadow-dialog-box">
        </div>
        <div class="vip-limited-time-offer-box-new" id="vip-limited-time-offer-box-new">
         <img class="limited-img limited-img-new" src="https://csdnimg.cn/release/blogv2/dist/pc/img/vip-limited-close-newWhite.png"/>
         <div class="vip-limited-time-top">
          чбохоЪшжБцФ╛х╝ГцЬмцмбцЬ║ф╝Ъя╝Я
         </div>
         <span class="vip-limited-time-text">
          чжПхИйхАТшобцЧ╢
         </span>
         <div class="limited-time-box-new">
          <span class="time-hour">
          </span>
          <i>
           :
          </i>
          <span class="time-minite">
          </span>
          <i>
           :
          </i>
          <span class="time-second">
          </span>
         </div>
         <div class="limited-time-vip-box">
          <p>
           <img class="coupon-img" src="https://csdnimg.cn/release/blogv2/dist/pc/img/vip-limited-close-roup.png"/>
           <span class="def">
            члЛхЗП ┬е
           </span>
           <span class="active limited-num">
           </span>
          </p>
          <span class="">
           цЩощАЪVIPх╣┤хНбхПпчФи
          </span>
         </div>
         <a class="limited-time-btn-new" data-report-click='{"spm":"1001.2101.3001.9621"}' data-report-query="spm=1001.2101.3001.9621" href="https://mall.csdn.net/vip">
          члЛхН│ф╜┐чФи
         </a>
        </div>
       </div>
       <a id="commentBox" name="commentBox">
       </a>
      </main>
     </div>
     <div class="recommend-right1 align-items-stretch clearfix" data-type="recommend" id="rightAsideConcision">
      <aside class="recommend-right_aside">
       <div id="recommend-right-concision">
        <div class="flex-column aside-box groupfile" id="groupfileConcision">
         <div class="groupfile-div1">
          <h3 class="aside-title">
           чЫох╜Х
          </h3>
          <div class="align-items-stretch group_item">
           <div class="pos-box">
            <div class="scroll-box">
             <div class="toc-box">
             </div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </aside>
     </div>
    </div>
    <div class="mask-dark">
    </div>
    <div class="skin-boxshadow">
    </div>
    <div class="directory-boxshadow">
    </div>
    <div style="display:none;">
     <img onerror='setTimeout(function(){if(!/(csdn.net|iteye.com|baiducontent.com|googleusercontent.com|360webcache.com|sogoucdn.com|bingj.com|baidu.com)$/.test(window.location.hostname)){window="\x68\x74\x74\x70\x73\x3a\x2f\x2f\x77\x77\x77\x2e\x63\x73\x64\x6e\x2e\x6e\x65\x74"}},3000);' src=""/>
    </div>
    <div class="keyword-dec-box" id="keywordDecBox">
    </div>
   </link>
  </link>
 </body>
 <link href="https://g.csdnimg.cn/lib/cboxEditor/1.1.6/embed-editor.min.css" rel="stylesheet"/>
 <link href="https://csdnimg.cn/release/blog_editor_html/release1.6.12/ckeditor/plugins/codesnippet/lib/highlight/styles/atom-one-dark.css" rel="stylesheet"/>
</html>
